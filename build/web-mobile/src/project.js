window.__require=function t(e,o,r){function i(l,c){if(!o[l]){if(!e[l]){var a=l.split("/");if(a=a[a.length-1],!e[a]){var s="function"==typeof __require&&__require;if(!c&&s)return s(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+l+"'")}}var h=o[l]={exports:{}};e[l][0].call(h.exports,function(t){return i(e[l][1][t]||t)},h,h.exports,t,e,o,r)}return o[l].exports}for(var n="function"==typeof __require&&__require,l=0;l<r.length;l++)i(r[l]);return i}({Cell:[function(t,e,o){"use strict";cc._RF.push(e,"4562fBYoKNEnpCX37WskXpw","Cell");var r=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,l=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,o,r);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(l=(n<3?i(l):n>3?i(e,o,l):i(e,o))||l);return n>3&&l&&Object.defineProperty(e,o,l),l};Object.defineProperty(o,"__esModule",{value:!0});var n,l=cc._decorator,c=l.ccclass;l.property;(function(t){t[t.dead=0]="dead",t[t.alive=1]="alive"})(n=o.State||(o.State={}));var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._innerNode=null,e._value=0,e}return r(e,t),e.prototype.onLoad=function(){this._innerNode=cc.find("inner",this.node)},e.prototype.setNextState=function(t){this._value=t===n.alive?2|this._value:this._value},e.prototype.getState=function(){return 1&this._value?n.alive:n.dead},e.prototype.setState=function(t){this._value=t,this._innerNode.color=t===n.alive?cc.Color.BLACK:cc.Color.WHITE},e.prototype.updateState=function(){this._value>>=1,this.setState(this._value)},e.prototype.toggleState=function(){this.setState(this.getState()===n.alive?n.dead:n.alive)},e=i([c],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","Game");var r=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}(),i=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,l=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,o,r);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(l=(n<3?i(l):n>3?i(e,o,l):i(e,o))||l);return n>3&&l&&Object.defineProperty(e,o,l),l};Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Cell"),l=cc._decorator,c=l.ccclass,a=l.property,s=[{x:-1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1},{x:1,y:0},{x:1,y:-1},{x:0,y:-1},{x:-1,y:-1}],h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cellArea=null,e.cellPrefab=null,e.buttonNode=null,e.speed=.1,e._timer=0,e._runing=!1,e._maxCellWidth=80,e._maxCellHeight=68,e._cellWidth=10,e._cellMetrix=[],e}return r(e,t),e.prototype.onLoad=function(){this.cellArea.on("touchstart",this._onTouchStart,this),this._init()},e.prototype.onDestroy=function(){this.cellArea.off("touchstart",this._onTouchStart,this)},e.prototype.toggleGameStatus=function(){this._runing=!this._runing,this.buttonNode.getComponentInChildren(cc.Label).string=this._runing?"Pause":"Start"},e.prototype.resetGame=function(){this._runing=!1,this.buttonNode.getComponentInChildren(cc.Label).string="Start";for(var t=0;t<this._maxCellWidth;t++)for(var e=0;e<this._maxCellHeight;e++)this._cellMetrix[t][e].setState(n.State.dead)},e.prototype.onSliderChanged=function(t){console.log(t.progress),this.speed=Math.max(.016,t.progress)},e.prototype._init=function(){for(var t=0;t<this._maxCellWidth;t++){this._cellMetrix[t]=[];for(var e=0;e<this._maxCellHeight;e++){var o=cc.instantiate(this.cellPrefab);this.cellArea.addChild(o),o.setPosition(cc.v2(t*this._cellWidth,e*this._cellWidth));var r=o.getComponent(n.default);r.setState(n.State.dead),this._cellMetrix[t][e]=r}}},e.prototype._onTouchStart=function(t){if(!this._runing){var e=t.getLocation();e=this.cellArea.convertToNodeSpaceAR(e);var o=Math.floor(e.x/this._cellWidth),r=Math.floor(e.y/this._cellWidth);this._cellMetrix[o][r].toggleState()}},e.prototype._checkLiveCellState=function(){for(var t=0;t<this._maxCellWidth;t++)for(var e=0;e<this._maxCellHeight;e++)this._setCellNextState(this._cellMetrix[t][e]);for(t=0;t<this._maxCellWidth;t++)for(e=0;e<this._maxCellHeight;e++)this._cellMetrix[t][e].updateState()},e.prototype._setCellNextState=function(t){for(var e=0,o=0,r=s;o<r.length;o++){var i=r[o],l=i.x,c=i.y,a=t.node.x/this._cellWidth+l,h=t.node.y/this._cellWidth+c;a<0&&(a=this._maxCellWidth-1),a>=this._maxCellWidth&&(a=0),h<0&&(h=this._maxCellHeight-1),h>=this._maxCellHeight&&(h=0),this._cellMetrix[a][h].getState()===n.State.alive&&e++}3===e&&t.setNextState(n.State.alive),2===e&&t.setNextState(t.getState())},e.prototype.update=function(t){this._runing&&(this._timer+=t,this._timer>=this.speed&&(this._timer=0,this._checkLiveCellState()))},i([a(cc.Node)],e.prototype,"cellArea",void 0),i([a(cc.Prefab)],e.prototype,"cellPrefab",void 0),i([a(cc.Node)],e.prototype,"buttonNode",void 0),i([a(cc.Integer)],e.prototype,"speed",void 0),e=i([c],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./Cell":"Cell"}]},{},["Cell","Game"]);